(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8427],{8044:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var a=n(45227),r=n(1324),s=n(76778),o=(0,r.q)({url:function(e){var t=e.orderItemId;return"rate-review/order/".concat(t,"/rate-submit/")},type:a.XN.POST,inputTransformer:function(e){var t=e.rate;return{rate:(0,s._G)(t)}}})},58809:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var a=n(70865),r=n(52322),s=n(2784),o=n(18577),i=(0,s.forwardRef)(function(e,t){var n=e.id,a=e.name,s=e.label,i=e.value,l=e.description,c=e.checked,d=e.className,u=e.onChange,m=e.labelClassName,p=e.activeColor,f=e.disabled;return(0,r.jsxs)("label",{className:(0,o.dh)({"flex items-start py-3":!d,"opacity-50":f},d),children:[(0,r.jsx)("input",{ref:t,id:n,type:"radio",name:a,value:i,checked:c,className:"hidden",disabled:f,onChange:u}),(0,r.jsx)("span",{className:"w-6 h-6 shrink-0",children:c?(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2Z",fill:"var(--color-".concat(void 0===p?"secondary":p,"-500)")}),(0,r.jsx)("path",{d:"M12 7C9.2 7 7 9.2 7 12C7 14.8 9.2 17 12 17C14.8 17 17 14.8 17 12C17 9.2 14.8 7 12 7Z",fill:"white"})]}):(0,r.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12ZM4 12C4 16.4 7.6 20 12 20C16.4 20 20 16.4 20 12C20 7.6 16.4 4 12 4C7.6 4 4 7.6 4 12Z",fill:f?"#A1A3A8":"#424750"})})}),(s||l)&&(0,r.jsxs)("div",{className:"mr-4 grow",children:[(0,r.jsx)("p",{className:(0,o.dh)("text-body-1",m),children:s}),(0,o.HD)(l)?(0,r.jsx)("p",{className:"text-body-2 text-neutral-500",children:l}):l]})]})});function l(e){return(0,r.jsx)(i,(0,a.Z)({},e))}},90865:function(e,t,n){"use strict";n.d(t,{t:function(){return j}});var a=n(70865),r=n(52322),s=n(96670),o=n(26297),i=n(66383),l=n(2784),c=n(45954),d=n(47842),u=n(74424),m=n(23325),p=n(813),f=n(18936),v=n(52871),x=n(32534),h=n.n(x);function N(e){var t=e.className,n=e.maxFiles,o=e.title,i=e.subTitle,l=e.accept,c=e.children,x=e.hasPreviewItem,N=e.updateFiles,b=e.hasError,j=e.hideButton,g=e.dropZoneBody,_=e.multiple,y=(0,u.uI)({onDrop:function(e){(0,v.xb)(e)||null==N||N(e)},multiple:_,maxFiles:void 0===n?1:n,accept:void 0===l?"image/jpeg, image/png, video/*":l,disabled:!!b}),I=y.getRootProps,C=y.getInputProps,T=y.isDragActive,w=y.isDragReject,S=(0,f.d)("p-5 bg-neutral-000 rounded border-complete text-center",(0,d.Z)({},h()["UploadBox__dropZone--active-drag"],T),(0,d.Z)({},h()["UploadBox__dropZone--error"],b||w),{"border-complete-200":!T&&!b},h().UploadBox__dropZone,t);return(0,r.jsxs)("div",(0,s.Z)((0,a.Z)({},I({className:S})),{children:[(0,r.jsx)("input",(0,a.Z)({},C())),g||(0,r.jsxs)("div",{children:[(0,r.jsx)("h6",{className:"text-body-2 text-center text-neutral-700",children:void 0===o?"عکس یا ویدیو خود را جهت بارگذاری داخل کادر بیاندازید.":o}),(0,r.jsx)("p",{className:"text-caption text-center text-neutral-700",children:void 0===i?"حداکثر ۵ تصویر jpeg یا PNG حداکثر یک مگابایت، یک ویدئو MP4 حداکثر ۵۰ مگابایت":i})]}),(0,r.jsxs)("div",{className:"flex justify-evenly items-center mt-4",children:[!(void 0!==j&&j)&&(0,r.jsxs)(p.zx,{type:"button",size:"large",shape:"outlined",color:"primary",children:[(0,r.jsx)(m.J,{icon:"fileTransferUpload",size:22,color:"primary",className:"ml-2"}),"بارگذاری تصویر"]}),void 0!==x&&x&&c]})]}))}function b(e){var t=e.className,n=e.errorClassName,d=e.error,u=e.subTitle,m=e.accept,p=e.dropZoneClassName,f=(0,o.Z)(e,["className","errorClassName","error","subTitle","accept","dropZoneClassName"]),v=(0,i.Z)((0,l.useState)([]),2),x=v[0],h=v[1],b=(0,l.useCallback)(function(e){var t=e.map(function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})});h(t),f.upload&&f.upload({files:t})},[h]),j=x.map(function(e){return e.name});return(0,l.useEffect)(function(){return function(){x.forEach(function(e){return URL.revokeObjectURL(e.preview)})}},[x]),(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)(N,(0,s.Z)((0,a.Z)({updateFiles:b,hasPreviewItem:x.length>0,hasError:!!d,subTitle:u,accept:m,className:p},f),{children:(0,r.jsx)("p",{className:"text-left text-neutral-500 text-body-2",children:j})})),d&&(0,r.jsx)(c.kW,{color:"error",icon:"infoFill",className:n,title:d})]})}function j(e){return(0,r.jsx)(b,(0,a.Z)({},e))}},1494:function(e,t,n){"use strict";n.d(t,{D:function(){return ee}});var a,r=n(47842),s=n(66383),o=n(50930),i=n(52322),l=n(2784),c=n(59437),d=n(57931),u=n(16137),m=n(72610),p=n(65886),f=n(15174),v=n(17190),x=n(1734),h=n(60170),N=n(72677);function b(e){var t=e.option,n=e.className,a=e.isActive,r=e.isFirstOption,s=e.isLastOption,o=e.handleOnClick,l=t.title;return t.value,(0,i.jsx)("div",{className:(0,N.d)(n,"py-4 px-2 text-body-2-compact text-neutral-500 text-wrap border-complete text-center flex items-center flex-1",{"text-body2-strong-compact text-white bg-[#212121] z-1":a,"rounded-r-md":r,"rounded-l-md":s}),onClick:o,children:l})}function j(e){var t=e.className,n=e.options,a=e.value,r=e.onChange,s=function(e){r(e)};return(0,i.jsxs)("div",{className:t,children:[(0,i.jsx)("p",{className:"text-subtitle-strong mb-2",children:"کالای دریافتی کاملا اندازه شما بود؟"}),(0,i.jsx)("div",{className:"flex w-full",children:n.map(function(e,t){var r=e.title,o=e.value;return(0,i.jsx)(b,{option:e,className:"cursor-pointer",isActive:a===o,isFirstOption:0===t,isLastOption:t===n.length-1,handleOnClick:function(){return s(o)}},r)})})]})}var g=n(31909),_=n(72162),y=n(29502),I=n(2334),C=n(52216);function T(e){var t=e.className,n=e.product,a=e.variantInfo,r=e.date,s=e.shouldHideVariant,o=e.isClickDisabled,l=void 0!==o&&o,d=n||{},u=d.productUrl,m=d.productImage,p=d.productTitle,f=a||{},v=f.commentVariantInfoSeller,x=f.commentVariantInfoColor,h=f.commentVariantInfoSize;return(0,i.jsx)("div",{className:(0,N.d)(t,"flex flex-col items-start"),children:(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)(c.e,{href:!l&&u,className:"flex flex-col items-start mb-4",children:(0,i.jsx)(g.E,{className:"shrink-0",image:m,alt:p,height:56,width:56})}),(0,i.jsxs)("div",{className:"mr-3",children:[(0,i.jsx)(c.e,{href:!l&&u,children:(0,i.jsx)("p",{className:"text-body1-strong text-neutral-800 ellipsis-1 grow-0",children:p})}),!(void 0!==s&&s)&&(0,i.jsxs)("div",{className:"flex items-center gap-1 text-caption whitespace-nowrap mt-2",children:[(0,i.jsx)(y.e,{seller:v}),(0,i.jsx)(_.b,{color:x}),(0,i.jsx)(I.N,{size:h}),(0,i.jsx)("p",{className:"text-neutral-500",children:(0,C.U)(r)})]})]})]})})}var w=n(31089);function S(e){var t=e.className,n=e.value,a=e.onChange,r=e.name,s=e.errorClassName,o=e.error;return(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"text-subtitle-strong",children:[(0,i.jsxs)("span",{children:[" ",n?"امتیاز ثبت شده:":"امتیاز دهید!"]}),(0,i.jsx)("span",{className:"text-primary-500",children:"*"})]}),(0,i.jsx)(w.z,{shouldShowRateNumber:!0,className:t,wrapperClassName:"justify-around",rateClassName:"gap-x-6",value:n,onChange:a,name:r,error:o,errorClassName:s})]})}var Z=n(15644),M=n(98780),E=n(21494),k=n(41435);function U(e){var t=e.items;e.className;var n=(0,s.Z)((0,l.useState)(0),2),a=n[0],r=n[1];return((0,l.useEffect)(function(){if(t.length>1){var e=setInterval(function(){r(function(e){return(e+1)%t.length})},3e3);return function(){clearInterval(e)}}},[t.length]),(0,l.useEffect)(function(){if(a===t.length-1&&t.length>1){var e=setTimeout(function(){r(0)},3e3);return function(){clearTimeout(e)}}},[a,t.length]),(0,k.x)(t))?null:(0,i.jsx)("div",{className:"overflow-hidden mb-3 h-5 lg:mt-0",children:(0,i.jsx)("div",{style:{transform:"translateY(".concat(-20*a,"px)"),transitionDuration:"".concat(0===a?"0s":"".concat(300,"ms"))},children:t.map(function(e,t){return(0,i.jsx)("div",{children:e})})})})}var A=n(24960),O=n.n(A),z=(0,l.forwardRef)(function(e,t){var n=e.className,a=e.openSelectCommentType,r=e.username,o=e.isAnonymous,c=e.suggestedQuestions,d=e.name,u=e.error,m=e.value,p=e.onChange,f=(0,s.Z)((0,l.useState)(!1),2),v=f[0],x=f[1],h=(0,s.Z)((0,l.useState)(!1),2),b=h[0],j=h[1],g=(0,l.useMemo)(function(){var e=null==c?void 0:c.map(function(e,t){return(0,i.jsx)("div",{className:"text-body-2 h-5",children:e})});return(null==e?void 0:e.length)>1&&(null==e||e.push((0,i.jsx)("div",{className:"text-body-2 h-5",children:c[0]}))),e},[c]),_=function(e){(null==e?void 0:e.length)>=3?(x(!0),j(!1),(null==e?void 0:e.length)>120&&j(!0)):x(!1)};(0,l.useEffect)(function(){_(m)},[]);var y={name:o?"کاربر دیجی‌کالا":r,buttonTp:o?"ارسال ناشناس":"ارسال با نام شما"};return(0,i.jsxs)("div",{className:(0,N.d)(n),children:[(0,i.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,i.jsx)("span",{className:(0,N.d)("text-subtitle-strong",O().required_badge),children:"متن دیدگاه:"}),v&&(0,i.jsx)(Z.A,{activeColor:"success",isActive:!0,size:"small",radiusSize:"medium",className:(0,N.d)({"bg-app-background-mid-dark text-neutral-650":b},"text-caption-strong !border-none"),children:b?"ممنون که دیدگاه مفیدی برای کاربران می‌نویسی":"پیشنهاد می‌کنیم دیدگاهت رو کامل‌تر کنی"})]}),(0,i.jsx)(E.I,{ref:t,isTextarea:!0,fullWidth:!0,backgroundColor:"color-app-background",inputWrapperClassName:"!rounded-none !rounded-t-md !border-b-neutral-200 !border-l-neutral-300 !border-t-neutral-300 !border-r-neutral-300",inputClassName:"caret-black h-29",placeholder:"نظر خود را در مورد این کالا با کاربران دیگر به اشتراک بگذارید..",name:d,error:u,value:m,onChange:function(e){_(e.target.value),p(e)}}),(0,i.jsxs)("div",{className:"border-complete !border-t-0 !border-l-neutral-300 !border-b-neutral-300 !border-r-neutral-300 p-2 items-center rounded-b-md flex justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-body2-strong text-neutral-650 truncate",children:y.name}),(0,i.jsxs)("div",{className:"flex items-center bg-app-background-mid-dark text-neutral-650 px-3 py-1 rounded-lg cursor-pointer",onClick:a,children:[(0,i.jsx)("span",{className:"text-body-2 ml-1 whitespace-nowrap",children:y.buttonTp}),(0,i.jsx)(M.J,{icon:"cube-nav-chevron-down",size:18})]})]}),!(0,k.x)(c)&&(0,i.jsxs)("div",{className:"flex overflow-hidden h-5 items-center",children:[(0,i.jsx)(M.J,{icon:"cube-action-ai-all",color:"ai",className:"ml-1",size:20}),(0,i.jsx)("div",{className:"overflow-hidden h-5 flex",children:g.length>1?(0,i.jsx)(U,{items:g}):g[0]})]})]})}),R=n(50603),D=n(58809);function F(e){var t=e.isModalOpen,n=e.closeModal,a=e.isAnonymous,r=e.username,s=e.onChange,o=(0,l.useMemo)(function(){return[{name:"isAnonymous",label:"ارسال ناشناس",caption:(0,i.jsx)("div",{className:"text-caption text-neutral-600",children:"دیدگاه شما در صفحه محصول با عنوان کاربر دیجی‌کالا نمایش داده می‌شود"}),checked:a,value:"anonymous"},{name:"personal_name",label:"ارسال با نام شما",caption:(0,i.jsxs)("div",{className:"text-caption text-neutral-600",children:["دیدگاه شما در صفحه محصول با نام"," ",(0,i.jsx)("span",{className:"text-caption-strong",children:r})," نمایش داده می‌شود"]}),checked:!a,value:"known"}]},[a]);return(0,i.jsx)(R.Modal,{isOpen:t,headerTitle:"نحوه نمایش دیدگاه‌ها",onDismiss:n,children:o.map(function(e,t){return(0,i.jsx)("div",{children:(0,i.jsx)(D.Y,{name:e.name,label:e.label,checked:e.checked,description:e.caption,labelClassName:"text-body1-strong text-neutral-900",value:e.value,onChange:s})})})})}var P=n(64665),L=n(26442),B=n(57874),V=n(11559),J=n(90247),G=n(80803),q=n(87049),X=n(6013),H=n(42306),Q=n(75490),Y=n(9697),W=n(82332),K={1:B.U.tooSmall,2:B.U.small,3:B.U.fit,4:B.U.big,5:B.U.tooBig},$=(a={},(0,r.Z)(a,B.U.tooSmall,1),(0,r.Z)(a,B.U.small,2),(0,r.Z)(a,B.U.fit,3),(0,r.Z)(a,B.U.big,4),(0,r.Z)(a,B.U.tooBig,5),a);function ee(e){var t=e.productId,n=e.pending,a=e.addCommentData,r=e.hasThankYouStep,b=void 0!==r&&r,g=e.showThankYouStep,_=e.className,y=e.buttonClassName,I=e.onSuccess,C=(0,G.d)(),w=C.isOpen,Z=C.onOpen,M=C.onClose,E=(0,V.E)({apiMethod:v.Q,onSuccess:function(e){b?null==g||g():(0,Q.p)({message:"نظر شما ثبت گردید و پس از تایید، نمایش داده خواهد شد"}),null==I||I(e)}}),k=E.request;E.pending;var U=(0,q.v)(null===X.p||void 0===X.p?void 0:X.p.userInfo),A=(0,J.c)().ref,O=(0,l.useRef)(),R=(0,l.useRef)(),D=(0,s.Z)((0,l.useState)(null),2),B=D[0],ee=D[1],et=function(){var e;R.current.style.paddingBottom="".concat(null===(e=O.current)||void 0===e?void 0:e.clientHeight,"px")},en=a||{},ea=en.product,er=en.hasTrueToSize,es=en.variantInfo,eo=en.createdAt,ei=en.comment,el=en.userIsbuyer,ec=en.suggestedQuestions,ed=en.orderItemId,eu=ei||{},em=eu.commentBody,ep=eu.commentIsAnonymous,ef=eu.commentFiles,ev=eu.commentRate,ex=eu.commentTrueToSizeRate;(0,l.useEffect)(function(){ev&&setTimeout(function(){null==B||B.focus()},800)},[ev,B]);var eh=(0,s.Z)((0,l.useState)(!1),2),eN=eh[0],eb=eh[1],ej=(0,l.useCallback)(function(){eb(!0),setTimeout(function(){eb(!1)},500)},[eb]);(0,l.useEffect)(function(){return null==B||B.addEventListener("blur",ej),function(){return null==B?void 0:B.removeEventListener("blur",ej)}},[B]);var eg=(0,s.Z)((0,l.useState)(ep),2),e_=eg[0],ey=eg[1];(0,l.useEffect)(function(){ey(ep)},[ep]);var eI=(0,l.useMemo)(function(){return[{component:(0,i.jsx)(S,{className:"mt-4 mb-5"}),name:x.m.RATING,disabled:!el},{component:(0,i.jsx)("div",{className:"border-complete-b"})},{component:(0,i.jsx)(j,{options:h.G,className:"mb-8 mt-5"}),name:x.m.TRUE_TO_SIZE,disabled:!(0,H.d)(P.X.TRUE_TO_SIZE)||!el||!er},{component:(0,i.jsx)(z,{className:"my-5",openSelectCommentType:Z,username:null==U?void 0:U.userName,isAnonymous:e_,suggestedQuestions:ec,ref:function(e){ee(e)}}),name:x.m.COMMENT},{component:(0,i.jsx)(f.Q,{shouldShakeHint:eN}),name:x.m.TEMPORARY_MEDIA_IDS,rules:{validate:Y.zK},disabled:!el},{component:(0,i.jsx)(p.x,{handleHeight:!0,onResize:et,children:(0,i.jsxs)("div",{className:(0,N.d)("w-full z-1 bg-neutral-000 px-5 py-4 bottom-0 shadow-1-top",y),ref:O,children:[(0,i.jsx)(d.z,{size:"large",className:"w-full mb-2",type:"submit",children:el?"ثبت امتیاز و دیدگاه":"ثبت دیدگاه"}),(0,i.jsxs)("p",{className:"text-caption text-center",children:["ثبت دیدگاه به معنی موافقت با",(0,i.jsx)(c.e,{className:"mx-1 text-secondary-500",href:L.m,target:"_blank",children:"قوانین انتشار دیجی‌کالا"}),"است."]})]})})}].reduce(function(e,t){return t.disabled?e:(0,o.Z)(e).concat([t])},[])},[e_,ep,em,ef,er,eN]);return void 0!==n&&n?(0,i.jsx)(m.g,{className:"my-20"}):(0,i.jsxs)("div",{className:_,children:[(0,i.jsxs)("div",{className:"p-4",ref:R,children:[(0,i.jsx)(T,{product:ea,variantInfo:es,date:eo,shouldHideVariant:!el,isClickDisabled:!0}),(0,i.jsx)(u.l,{ref:A,useFormProps:{mode:"onChange",defaultValues:{comment:em,rating:ev,temporaryMediaIds:ef,trueToSize:$[ex]}},items:eI,onSubmit:function(e){var n,a;return k({orderItemId:ed||null,comment:e.comment,temporaryMediaIds:null===(n=e.temporaryMediaIds)||void 0===n?void 0:n.map(function(e){return null==e?void 0:e.mediaTemporaryId}).filter(Boolean),oldFilesMediaIds:null===(a=e.temporaryMediaIds)||void 0===a?void 0:a.map(function(e){var t;return(null==e?void 0:e.mediaTemporaryId)?void 0:null==e?void 0:null===(t=e.mediaStorageIds)||void 0===t?void 0:t[0]}).filter(Boolean),isAnonymous:e_,rating:e.rating,trueToSize:(0,H.d)(P.X.TRUE_TO_SIZE)&&er&&el?K[+e.trueToSize]:void 0,productId:t})}})]}),(0,i.jsx)(F,{isModalOpen:w,closeModal:M,onChange:function(e){ey((0,W.t)(e.target.value,"anonymous"))},username:null==U?void 0:U.userName,isAnonymous:e_})]})}},15174:function(e,t,n){"use strict";n.d(t,{Q:function(){return D}});var a=n(47842),r=n(70865),s=n(50930),o=n(52322),i=n(2784),l=n(98780),c=n(97411),d=n(64665),u=n(11559),m=n(42306),p=n(41435),f=n(72677),v=n(31909),x=n(61695),h=n(82332),N=n(20123),b=n.n(N);function j(e){var t=e.mediaUrl,n=e.mediaThumbnailUrl,a=e.mediaFileType,r=e.onDelete,s=(0,h.t)(a,x.L.VIDEO),i=(0,m.d)(d.X.ADD_COMMENT_FORM_SINGLE_STEP)||(0,m.d)(d.X.ADD_COMMENT_FORM_MULTIPLE_STEP);return(0,o.jsxs)("div",{className:(0,f.d)({"mr-2 overflow-hidden min-w-24":!i},"rounded relative",{"h-18 w-18":i}),children:[(0,o.jsx)(v.E,{src:n||t,alt:"digikala",width:i?72:96,height:i?72:96,className:"bg-neutral-900 rounded"}),s&&(0,o.jsx)(l.J,{icon:"playSimple",size:i?16:24,color:"white",className:(0,f.d)("absolute rounded-circle",b().AddCommentMediaItem__VideoPlayButton)}),(0,o.jsx)("div",{className:(0,f.d)("p-1 absolute rounded-medium bottom-1 left-1",{"p-2":i},b().AddCommentMediaItem__CTADeleteIcon),children:(0,o.jsx)(l.J,{icon:"delete",size:i?16:24,color:"white",onClick:r})})]})}var g=n(96670),_=n(26297),y=n(66383),I=n(23945),C=n(90865),T=n(45227),w=n(1324),S=n(64248),Z=n(95976),M=(0,w.q)({type:T.XN.POST,url:"media/upload/comments/",options:{timeout:18e4},transformer:function(e){var t;return(0,S.Y)({temporaryMedia:(0,Z.w)({data:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.temporary_media})})},inputTransformer:function(e){var t=e.file,n=new FormData;return n.append("file",t),n}}),E=n(52216);function k(e){var t=e.file,n=e.onSuccess,a=e.onFailed,r=e.className,s=(0,y.Z)((0,i.useState)(0),2),c=s[0],d=s[1],m=(0,u.E)({apiMethod:M,onUploadProgressCallback:function(e){var t=Math.floor(100*e.loaded/e.total);t<=100&&d(t)},onSuccess:function(e){n(null==e?void 0:e.temporaryMedia)},onError:a,requestDataOnLoad:{file:t},fireOnLoad:!!t}).cancelRequest;return(0,o.jsxs)("div",{className:(0,f.d)("relative ml-2 overflow-hidden rounded-medium bg-neutral-900 h-[96px] w-[96px]",r),children:[(0,o.jsxs)("div",{className:(0,f.d)("absolute flex items-center text-neutral-000 left-[15px] top-[15px]"),children:[(0,o.jsx)(l.J,{icon:"fileTransferUpload",color:"white",size:24}),(0,o.jsxs)("p",{className:"mr-2",children:[(0,E.U)(c)," % "]})]}),(0,o.jsx)("div",{className:(0,f.d)("p-2 bg-neutral-000 absolute rounded border bottom-1 left-1"),onClick:m,children:(0,o.jsx)(l.J,{icon:"cancel",size:24})})]})}var U=n(98634);function A(e){var t=e.acceptableFileFormats,n=e.onUploadSuccess,s=e.error,c=e.className,u=e.shouldShrink,v=void 0!==u&&u,x=(0,y.Z)((0,i.useState)({}),2),h=x[0],N=x[1],b=function(){var e=(0,y.Z)(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],1),t=e[0];if(t){var n=(0,U.EL)();N(function(e){return(0,g.Z)((0,r.Z)({},e),(0,a.Z)({},n,t))})}},j=function(e){return function(t){n(t),N(function(t){t[e];var n=(0,_.Z)(t,[e].map(I.Z));return(0,r.Z)({},n)})}},T=function(e){return function(){N(function(t){t[e];var n=(0,_.Z)(t,[e].map(I.Z));return(0,r.Z)({},n)})}},w=(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,o.jsx)(l.J,{icon:"cube-file-image-add",color:"black",size:20}),(0,o.jsx)("p",{className:"text-body2-strong mt-1",children:v||!(0,p.x)(h)?"افزودن":"افزودن عکس یا ویدیو"})]});return(0,m.d)(d.X.ADD_COMMENT_FORM_MULTIPLE_STEP)||(0,m.d)(d.X.ADD_COMMENT_FORM_SINGLE_STEP)?(0,o.jsxs)("div",{className:(0,f.d)(c,{"w-full":!v,"flex gap-x-2":!(0,p.x)(Object.entries(h))}),children:[(0,o.jsx)(C.t,{accept:t,updateFiles:b,dropZoneBody:w,dropZoneClassName:(0,f.d)("!border-none bg-neutral-100 !p-4 h-18",{"w-18":v||!(0,p.x)(Object.entries(h))}),hideButton:!0,errorClassName:"absolute whitespace-nowrap",error:s}),Object.entries(h).map(function(e){var t=(0,y.Z)(e,2),n=t[0],a=t[1];return(0,o.jsx)(k,{className:"shrink-0 !h-18 !w-18",file:a,onSuccess:j(n),onFailed:T(n)},n)})]}):(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)("div",{className:"relative pb-10",children:(0,o.jsx)(C.t,{title:"افزودن",subTitle:(0,o.jsx)(l.J,{icon:"addCircleOutline",color:"secondary",size:32}),accept:t,updateFiles:b,className:"flex flex-col items-center text-secondary-500 py-4 px-5 rounded-medium cursor-pointer shrink-0 h-[96px] w-[96px]",hideButton:!0,errorClassName:"absolute whitespace-nowrap",error:s})}),Object.entries(h).map(function(e){var t=(0,y.Z)(e,2),n=t[0],a=t[1];return(0,o.jsx)(k,{className:"shrink-0",file:a,onSuccess:j(n),onFailed:T(n)},n)})]})}var O=(0,w.q)({type:T.XN.POST,url:function(e){var t=e.temporaryId;return"comments/".concat(t,"/media/delete/")}}),z=n(92119),R=n.n(z);function D(e){var t,n,v=e.value,x=void 0===v?[]:v,h=e.onChange,N=e.shouldShakeHint,b=e.className,g=e.acceptableFileFormats,_=void 0===g?"image/jpeg, image/png, video/mp4 ,video/x-m4v ,video/x-msvideo":g,y=e.error,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h((0,s.Z)(x||[]).concat([(0,r.Z)({},e)]))},C=(0,i.useRef)(null),T=!1,w=(0,u.E)({apiMethod:O}).request,S=(0,i.useCallback)(function(e,t){return function(){var n=null==t?void 0:t.filter(function(t,n){return e!==n}),a=t[e];(null==a?void 0:a.mediaTemporaryId)&&w({temporaryId:null==a?void 0:a.mediaTemporaryId}),h(n)}},[h,w]),Z=(0,i.useMemo)(function(){return[(0,o.jsx)(A,{acceptableFileFormats:_,onUploadSuccess:I,error:y},"mediaUpload")].concat((0,s.Z)((x||[]).map(function(e,t,n){return(0,o.jsx)(j,{onDelete:S(t,n),mediaUrl:null==e?void 0:e.mediaUrl,mediaThumbnailUrl:null==e?void 0:e.mediaThumbnailUrl,mediaFileType:null==e?void 0:e.mediaType},null==e?void 0:e.mediaUrl)})))},(0,s.Z)(x||[]).concat([y]));return(0,m.d)(d.X.ADD_COMMENT_FORM_SINGLE_STEP)||(0,m.d)(d.X.ADD_COMMENT_FORM_MULTIPLE_STEP)?(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsxs)("div",{className:(0,f.d)("flex overflow-x-scroll w-full gap-x-2 overflow-y-hidden",b,R().mediaContainer),ref:C,onMouseDown:function(e){T=!0,t=e.pageX-C.current.offsetLeft,n=C.current.scrollLeft},onMouseLeave:function(e){T=!1},onMouseUp:function(e){T=!1},onMouseMove:function(e){if(T){e.preventDefault(),e.stopPropagation();var a=e.pageX-C.current.offsetLeft;C.current.scrollLeft=n-(a-t)*3}},children:[(0,o.jsx)(A,{acceptableFileFormats:_,onUploadSuccess:I,error:y,shouldShrink:!(0,p.x)(x)},"mediaUpload"),!(0,p.x)(x)&&x.map(function(e,t,n){return(0,o.jsx)(j,{onDelete:S(t,n),mediaUrl:null==e?void 0:e.mediaUrl,mediaThumbnailUrl:null==e?void 0:e.mediaThumbnailUrl,mediaFileType:null==e?void 0:e.mediaType},null==e?void 0:e.mediaUrl)})]}),(0,o.jsxs)("div",{className:(0,f.d)("mt-2 flex items-center",(0,a.Z)({},R().shakeHint,!!N)),children:[(0,o.jsx)(l.J,{icon:"cube-alert-info-outline",size:16,color:"low-emphasis"}),(0,o.jsx)("span",{className:"text-caption mr-1 text-neutral-400",children:"بسیاری از کاربران در تصمیم‌گیری خود به تصاویر کالای شما نیاز دارند"})]})]}):(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsx)("p",{className:"text-h5 text-neutral-900 lg:mt-5 mt-6",children:"ارسال محتوا"}),(0,o.jsx)("p",{className:"text-body-2 text-neutral-500 mb-4",children:"حداکثر ۵ عکس ۵ مگابایت و ۳ ویدیو با فرمت MP4 تا ۱۰۰ مگابایت"}),(0,o.jsx)("div",{className:(0,f.d)("flex items-center",b),children:(0,o.jsx)(c.l,{className:"min-w-0 grow mr-2",items:Z})})]})}},21556:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});var a=n(1249),r=n(28141),s=n(8398),o=n(73587),i=(0,n(1324).q)({url:function(e){var t=e.productId,n=e.orderItemId,a=e.isEdit?1:0,r=n?"?orderItemId=".concat(n,"&edit=").concat(a):"?edit=".concat(a);return"rate-review/products/".concat(t,"/check/").concat(r)},transformer:function(e){var t=e.data||{},n=t.review,s=t.is_buyer,i=t.has_true_to_size,l=t.variant_info,c=t.product,d=t.order_item_id,u=t.created_at,m=t.suggested_questions;return{comment:(0,a.T)({data:n}),userIsbuyer:!!s,hasTrueToSize:i,product:(0,o.r)({data:c}),orderItemId:d,createdAt:u,variantInfo:(0,r.t)({data:l}),suggestedQuestions:m}},inputTransformer:s.d,disableGlobalSearchParams:!0})},17190:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var a=n(45227),r=n(1324),s=n(12694),o=n(76778),i=(0,r.q)({type:a.XN.POST,url:function(e){var t=e.productId;return"rate-review/products/".concat(t,"/submit/")},inputTransformer:function(e){var t=e.title,n=e.comment,a=e.advantages,r=e.disAdvantages,i=e.temporaryMediaIds,l=e.oldFilesMediaIds,c=e.isAnonymous,d=e.rating,u=e.recommend,m=e.trueToSize,p=e.orderItemId;return(0,s.s)({order_item_id:p,rating:(0,o._G)(d),title:t,comment:n,advantages:a,disadvantages:r,recommend:u,temporary_media_ids:i,old_file_ids:l,is_anonymous:c,true_to_size_rate:m})}})},1734:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var a={RATING:"rating",TRUE_TO_SIZE:"trueToSize",RECOMMEND:"recommend",TITLE:"title",ADVANTAGES:"advantages",DISADVANTAGES:"disadvantages",COMMENT:"comment",TEMPORARY_MEDIA_IDS:"temporaryMediaIds",IS_ANONYMOUS:"isAnonymous"}},60170:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});var a=n(46514),r=[{title:a.Z.tooSmall,value:1},{title:a.Z.small,value:2},{title:a.Z.fit,value:3},{title:a.Z.big,value:4},{title:a.Z.tooBig,value:5}]},31089:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var a=n(66383),r=n(52322),s=n(2784),o=n(16986),i=n(72677);function l(e){var t=e.className,n=e.rateClassName,l=e.wrapperClassName,c=e.onChange,d=e.name,u=e.error,m=e.errorClassName,p=e.value,f=e.shouldUpdateValue,v=e.shouldShowRateNumber,x=e.title,h=e.size,N=(0,a.Z)((0,s.useState)(p),2),b=N[0],j=N[1];return(0,s.useEffect)(function(){f&&j(p)},[p]),(0,r.jsxs)("div",{className:t,children:[(0,r.jsxs)("div",{className:(0,i.d)("flex justify-between",l),children:[x&&(0,r.jsx)("p",{className:"text-body1-strong text-neutral-800",children:x}),(0,r.jsx)(o.a,{shouldShowRateNumber:v,size:h,className:n,rate:b,onSetRate:function(e){j(e),c({target:{value:e,name:d}})}})]}),u&&(0,r.jsx)("div",{className:(0,i.d)("text-body-2 mt-3 ml-auto text-hint-text-error",m),children:u})]})}},16986:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});var a=n(52322),r=n(98780),s=n(52216),o=n(72677);function i(e){var t=e.className,n=e.rate,i=e.onSetRate,l=e.shouldShowRateNumber,c=e.classNameRateNumber,d=void 0===c?"text-body1-strong mt-2 text-neutral-700":c,u=e.size,m=void 0===u?24:u;return(0,a.jsx)("div",{className:(0,o.d)(t,"flex"),children:Array.from({length:5},function(e,t){var o=n>t,c=t+1;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)(r.J,{onClick:function(){return i(c)},icon:o?"starFill":"starOutline",color:o?"warning":"low-emphasis",size:m}),l&&(0,a.jsx)("p",{className:d,children:(0,s.U)(c)})]})})})}},72162:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var a=n(52322),r=n(98780),s=n(72677),o=n(10863),i=n.n(o);function l(e){var t=e.className,n=e.color||{},o=n.colorTitle,l=n.colorHexCode;return o?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:(0,s.d)(t,"ml-2 inline-block rounded-circle",i().OrderItemColor),style:{backgroundColor:l}}),(0,a.jsx)("p",{className:"text-neutral-500 inline",children:o}),(0,a.jsx)(r.J,{icon:"dot",color:"low-emphasis",size:16})]}):null}},29502:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var a=n(52322),r=n(98780),s=n(98723);function o(e){var t=e.seller||{},n=t.sellerTitle,o=t.sellerUrl;return n?(0,a.jsxs)(s.r,{className:"flex items-center",target:"_blank",to:o,children:[(0,a.jsx)(r.J,{icon:"seller",size:18,className:"text-neutral-700 ml-2"}),(0,a.jsx)("p",{className:"text-neutral-500",children:n}),(0,a.jsx)(r.J,{icon:"dot",color:"low-emphasis",size:16})]}):null}},2334:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var a=n(52322),r=n(98780);function s(e){var t=(e.size||{}).sizeTitle;return t?(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(r.J,{icon:"variationSize",size:18}),(0,a.jsx)("p",{className:"text-neutral-500 inline mr-1",children:t}),(0,a.jsx)(r.J,{icon:"dot",color:"low-emphasis",size:16})]}):null}},28141:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var a=n(52126),r=n(82382),s=n(63431);function o(e){var t=e.data||{},n=t.seller,o=t.size,i=t.color;return{commentVariantInfoSeller:(0,r.N)({data:n}),commentVariantInfoColor:(0,a.n)({data:i}),commentVariantInfoSize:(0,s.E)({data:o})}}},1249:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var a=n(70865),r=n(96670),s=n(52126),o=n(95976),i=n(73587),l=n(96992),c=n(82382),d=n(63431);function u(e){var t,n,u=e.data||{},m=u.id,p=u.is_anonymous,f=u.title,v=u.body,x=u.created_at,h=u.relative_date,N=u.rate,b=u.reactions,j=u.files,g=u.status,_=u.recommendation_status,y=u.is_buyer,I=u.user_name,C=u.user_reactions,T=u.purchased_item,w=u.advantages,S=u.disadvantages,Z=u.rates,M=u.true_to_size_rate,E=u.product,k=u.order_item_id,U=b||{},A=U.likes,O=U.dislikes,z=T||{},R=z.seller,D=z.color,F=z.size,P=(0,c.N)({prefix:"commentPurchasedItem",data:R}),L=(0,c.N)({data:R}),B=(0,s.n)({prefix:"commentPurchasedItem",data:D}),V=(0,s.n)({data:D}),J=F?(0,d.E)({prefix:"commentPurchasedItem",data:F}):{},G=(0,d.E)({data:F}),q=(0,i.r)({prefix:"comment",data:E}),X=(0,i.r)({data:E}),H=(null==j?void 0:j.map(function(e){return(0,o.w)({data:e})}))||[],Q=(0,l.l)({data:null==N?void 0:null===(t=N.toFixed)||void 0===t?void 0:t.call(N,1)});return(0,r.Z)((0,a.Z)((0,r.Z)((0,a.Z)((0,r.Z)((0,a.Z)((0,r.Z)((0,a.Z)({commentId:m,commentIsAnonymous:!!p,commentTitle:f,commentBody:v,commentCreatedAt:x,commentRelativeDate:h,commentRating:Q,commentRate:null==N?void 0:null===(n=N.toFixed)||void 0===n?void 0:n.call(N,1),commentReactions:{likes:A,dislikes:O},commentOrderItemId:k,commentReactionsLikes:A,commentReactionsDislikes:O,commentFiles:H,commentStatus:g,commentRecommendationStatus:_,commentTrueToSizeRate:M,commentIsBuyer:!!y,commentUserName:I,commentUserReactions:C},P),{commentItemSeller:L}),B),{commentItemColor:V}),J),{commentItemSize:G,commentAdvantages:w,commentDisadvantages:S,commentRates:Z}),q),{commentProduct:X})}},95976:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var a=n(61695);function r(e){var t=e.data||{},n=t.storage_ids,r=t.url,s=t.temporary_id,o=t.thumbnail_url;return{mediaStorageIds:n||[],mediaUrl:null==r?void 0:r[0],mediaTemporaryId:s,mediaThumbnailUrl:(null==o?void 0:o[0])||"",mediaType:function(e){var t,n,r,s;if(!e)return a.L.UNKNOWN;switch(null===(t=/(\w+)\.([1-9A-Za-z]{3,4})(?=\?|$)/.exec(e))||void 0===t?void 0:null===(n=t.slice)||void 0===n?void 0:null===(r=n.call(t,-1))||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.toLowerCase()){case"jpg":case"jpeg":case"svg":case"png":return a.L.IMAGE;case"mp4":case"mkv":case"webm":return a.L.VIDEO;default:return a.L.UNKNOWN}}(null==r?void 0:r[0])}}},41701:function(e,t,n){"use strict";function a(e){var t=e.component,n=e.getAPIMethods,a=e.layoutProps,r=e.isPrivate,s=e.noDefaultLoader,o=e.pageActivatorFeature,i=e.redirectIfLogin,l=e.afterLogin,c=e.disableSSR,d=e.dataProps;return t.getAPIMethods=n,t.layoutProps=a,t.isPrivate=r,t.noDefaultLoader=s,t.pageActivatorFeature=o,t.redirectIfLogin=i,t.afterLogin=l,t.disableSSR=c,t.dataProps=d,t}n.d(t,{D:function(){return a}})},20123:function(e){e.exports={AddCommentMediaItem__CTADeleteIcon:"styles_AddCommentMediaItem__CTADeleteIcon__VsnWF",AddCommentMediaItem__VideoPlayButton:"styles_AddCommentMediaItem__VideoPlayButton__zPn0v"}},92119:function(e){e.exports={mediaContainer:"styles_mediaContainer__5IWxk",shakeHint:"styles_shakeHint__j0LzZ",shakeHintAnimation:"styles_shakeHintAnimation__In3Kw"}},24960:function(e){e.exports={required_badge:"styles_required_badge__zrGFx"}},10863:function(e){e.exports={OrderItemColor:"styles_OrderItemColor__T8oc3"}},32534:function(e){e.exports={UploadBox__dropZone:"styles_UploadBox__dropZone__jrLQi","UploadBox__dropZone--active-drag":"styles_UploadBox__dropZone--active-drag__fNEJa","UploadBox__dropZone--error":"styles_UploadBox__dropZone--error___tMNb"}}}]);