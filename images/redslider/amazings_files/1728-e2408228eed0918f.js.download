"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1728],{48485:function(e,s,n){n.d(s,{$:function(){return a}});var t=n(55059),i=n(45227),o=n(1324),r=n(12694),a=(0,o.q)({type:i.XN.POST,url:function(e){var s=e.answerId;return"answers/".concat(s,"/like/")},inputTransformer:function(e){var s=e.type;return(0,r.s)({type:s})},transformer:t.u})},26956:function(e,s,n){n.d(s,{x:function(){return l}});var t=n(52322),i=n(57931),o=n(98780),r=n(52216),a=n(72677);function l(e){var s=e.className,n=e.classNamePadding,l=e.feedbackContentClass,c=e.likeCount,d=e.dislikeCount,u=e.onLike,m=e.onDislike,x=e.isComments,p=void 0!==x&&x,w=e.isLoadingLike,h=e.isLoadingDislike,A=e.isLike,f=e.isDislike,k=e.thumbsUpCroId,I=e.thumbsDownCroId,q=(0,a.d)("flex items-center text-neutral-500",void 0===n?"pt-3":n,s),j=(0,a.d)("text-body-2 lg:ml-10",l,{"hidden lg:block":!p}),N=(0,a.d)("px-2 px-2",{"text-hint-text-success":A,"text-neutral-400":!A}),v=(0,a.d)("mr-1 px-2",{"text-hint-text-error":f,"text-neutral-400":!f}),L=(0,a.d)("mr-1",{"text-hint-success-text":A,"text-neutral-400":!A}),b=(0,a.d)("mr-1",{"text-hint-text-error":f,"text-neutral-400":!f});return(0,t.jsxs)("div",{className:q,children:[!p&&(0,t.jsx)("p",{className:j,children:"آیا این پاسخ مفید بود؟"}),(0,t.jsxs)("div",{className:"mr-auto lg:mr-0 flex items-center",children:[(0,t.jsx)(i.z,{isLoading:w,onClick:u,hasCustomMode:!0,removePadding:!0,mode:"text",size:"small",className:N,CROId:k,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:(0,r.U)(void 0===c?0:c)}),(0,t.jsx)(o.J,{icon:"thumbsUp",className:L,size:20,color:A?"success":"low-emphasis"})]})}),(0,t.jsxs)(i.z,{isLoading:h,onClick:m,hasCustomMode:!0,mode:"text",removePadding:!0,className:v,CROId:I,children:[(0,t.jsx)("p",{children:(0,r.U)(void 0===d?0:d)}),(0,t.jsx)(o.J,{icon:"thumbsDown",className:b,size:20,color:f?"error":"low-emphasis"})]})]})]})}},31969:function(e,s,n){n.d(s,{d:function(){return t}});var t={LIKE:"like",DISLIKE:"dislike"}},55059:function(e,s,n){n.d(s,{u:function(){return t}});function t(e){var s=e.data||{};return{dislikes:s.dislikes,likes:s.likes}}},21728:function(e,s,n){n.d(s,{Q:function(){return f}});var t=n(66383),i=n(52322),o=n(2784),r=n(98780),a=n(72677),l=n(41435),c=n(57931),d=n(598);function u(e){var s=e.openAnswerModal,n=e.buttonText,t=e.CROId,o=e.className;return(0,i.jsx)("div",{className:(0,a.d)("mr-10",o),children:(0,i.jsxs)(c.z,{mode:"text",size:"small",color:"secondary",onClick:s,CROId:t,className:"mt-3 text-secondary-500",children:[n,(0,i.jsx)(r.J,{icon:"chevronLeft",color:"secondary",size:16,className:"mx-2"})]})})}var m=n(74808),x=n(73739);function p(e){var s=e.className;return(0,i.jsx)(x.k,{className:s,icon:"infoOutline",children:"پاسخ شما ثبت شد و پس از بررسی و تایید نمایش داده خواهد شد."})}function w(e){var s=e.answers,n=e.questionText,t=e.submitted,o=e.showAllAnswers,a=e.setShowAllAnswers,l=e.openAnswerModal,x=e.className,w=e.disableReplayAction,h=e.productId;return o||1===s.length?(0,i.jsxs)("div",{className:x,children:[s.map(function(e){return(0,i.jsx)(d.s,{className:"br-list-vertical-no-padding",questionAnswer:e,questionText:n,productId:h},e.questionAnswerId)}),t?(0,i.jsx)(p,{}):!w&&(0,i.jsx)(u,{className:"border-complete-t mt-4",buttonText:"ثبت پاسخ جدید",openAnswerModal:l})]}):s.length>1?(0,i.jsxs)("div",{className:x,children:[(0,i.jsx)(d.s,{questionAnswer:s[0],questionText:n,productId:h}),(0,i.jsxs)(c.z,{shape:"text",color:"secondary",onClick:function(){a(!0),(0,m.y0)({type:"more_answers",productId:h})},className:"mt-2 mb-3 pr-0 mr-10 font-bold text-secondary-500",children:["مشاهده‌ی پاسخ‌های دیگر",(0,i.jsx)(r.J,{icon:"expandMore",color:"secondary",className:"mx-2",size:24})]})]}):null}function h(e){var s=e.submitted,n=e.openAnswerModal,t=e.className,o=e.disableReplayAction;return s?(0,i.jsx)(p,{className:(0,a.d)("mt-4",t)}):(0,i.jsx)("div",{className:(0,a.d)("mt-4",t),children:o?null:(0,i.jsx)("div",{className:"border-complete-t",children:(0,i.jsx)(u,{buttonText:"ثبت پاسخ‌",CROId:"pdp-answer",openAnswerModal:n})})})}var A=(0,o.memo)(function(e){var s=e.answers,n=e.questionId,r=e.questionText,a=e.showAllAnswers,c=e.setShowAllAnswers,d=e.openAnswerModal,u=e.disableReplayAction,m=e.productId,x=(0,t.Z)((0,o.useState)(!1),2),p=x[0],A=x[1],f=function(){A(!0)},k=function(){d({questionId:n,questionText:r,successCallback:f})};return(0,l.x)(s)?(0,i.jsx)(h,{submitted:p,openAnswerModal:k,disableReplayAction:u}):(0,i.jsx)(w,{answers:s,questionText:r,submitted:p,showAllAnswers:a,setShowAllAnswers:c,openAnswerModal:k,disableReplayAction:u,productId:m})});function f(e){var s=e.className,n=e.question,l=e.disableReplayAction,c=e.openAnswerModal,d=n||{},u=d.questionAnswers,m=d.questionText,x=d.questionId,p=(d.questionProduct||{}).productId,w=(0,t.Z)((0,o.useState)(!1),2),h=w[0],f=w[1];return(0,i.jsxs)("article",{className:(0,a.d)(s,"py-3"),children:[(0,i.jsxs)("div",{className:"flex items-start",children:[(0,i.jsx)("span",{className:"mt-1 ml-4",children:(0,i.jsx)(r.J,{icon:"question",color:"secondary",size:24})}),(0,i.jsx)("p",{className:"text-subtitle w-full",children:m})]}),(0,i.jsx)(A,{questionId:x,answers:u,questionText:m,showAllAnswers:h,setShowAllAnswers:f,openAnswerModal:c,disableReplayAction:l,productId:p})]})}},598:function(e,s,n){n.d(s,{s:function(){return N}});var t=n(66383),i=n(52322),o=n(2784),r=n(17165),a=n(45756),l=n(66781),c=n(82650),d=n(11559),u=n(40565),m=n(74808),x=n(41435),p=n(48485),w=n(26956),h=n(31969),A=n(98780),f=n(31909),k=n(61695),I=n(82332),q=n(72677);function j(e){var s=e.className,n=e.media,t=e.onClick,o=n.mediaUrl,r=n.mediaType,a=n.mediaThumbnailUrl,l=(0,I.t)(r,k.L.VIDEO);return(0,i.jsxs)("div",{className:(0,q.d)(s,"relative cursor-pointer"),onClick:t,children:[(0,i.jsx)(f.E,{alt:"question-answer-media",src:l?a:o,rounded:8,height:50,width:50}),l&&(0,i.jsx)(A.J,{size:24,className:"absolute bottom-0 left-0",icon:"playSimple",color:"white"})]})}function N(e){var s=e.className,n=e.questionAnswer,A=e.questionText,f=e.isInDetailModal,k=e.productId,I=n||{},q=I.questionAnswerId,N=I.questionAnswerText,v=I.questionAnswerType,L=I.questionAnswerSender,b=I.questionAnswerUserReaction,y=I.questionAnswerReactionsLikes,C=I.questionAnswerHasQABadge,R=I.questionAnswerReactionsDisLikes,D=I.questionAnswerMedias,g=(0,t.Z)((0,o.useState)([b].includes(h.d.LIKE)),2),S=g[0],T=g[1],E=(0,t.Z)((0,o.useState)([b].includes(h.d.DISLIKE)),2),M=E[0],z=E[1],U=(0,t.Z)((0,o.useState)({questionAnswerReactionsLikes:y,questionAnswerReactionsDisLikes:R}),2),K=U[0],O=U[1],P=function(e){var s=e||{},t=s.likes,i=s.dislikes;O({questionAnswerReactionsLikes:t,questionAnswerReactionsDisLikes:i}),n.questionAnswerReactionsDisLikes=i,n.questionAnswerReactionsLikes=t},_=(0,d.E)({apiMethod:p.$,onSuccess:P}),J=_.request,Z=_.pending,Q=(0,d.E)({apiMethod:p.$,onSuccess:P}),$=Q.request,B=Q.pending,F=(0,c.z)().emit;return(0,u.x)([{event:l.s6,handler:function(e){q===e.questionAnswerId&&(z([b].includes(h.d.DISLIKE)),T([b].includes(h.d.LIKE)),O({questionAnswerReactionsLikes:y,questionAnswerReactionsDisLikes:R}))}}]),(0,i.jsxs)("div",{className:s,children:[(0,i.jsxs)("div",{className:"flex items-center mt-4 text-neutral-600",children:[(0,i.jsx)("p",{className:"text-caption ml-4",children:"پاسخ"}),(0,i.jsx)("div",{className:"grow",children:(0,i.jsx)("p",{className:"text-body-1",children:N})})]}),(0,i.jsxs)("div",{className:"flex flex-col items-start justify-center mr-10",children:[!f&&!(0,x.x)(D)&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-3 lg:mb-3 mb-4",children:D.map(function(e,s){return(0,i.jsx)(j,{media:e,onClick:function(){return F(l.P8,{questionAnswer:n,questionText:A,mediaIndex:s,productId:k})}})})}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("p",{className:"text-caption text-neutral-400",children:L}),C?(0,i.jsx)(r.C,{size:"small",text:"نماینده برند",textClasses:"text-neutral-000",bgColor:"neutral-400"}):"buyer"===v?(0,i.jsx)(r.C,{size:"small",text:"خریدار",type:"success"}):"seller"===v?(0,i.jsx)(r.C,{size:"small",text:"فروشنده",type:"success"}):null]}),(0,i.jsx)(w.x,{onLike:function(){J({type:h.d.LIKE,answerId:q}).then(function(e){e.likes>K.questionAnswerReactionsLikes?(T(!0),n.questionAnswerUserReaction=h.d.LIKE):(T(!1),n.questionAnswerUserReaction="")}).finally(function(){z(!1)}),(0,m.y6)({type:"Like",productId:k})},isLike:S,className:"mr-auto",onDislike:function(){$({answerId:q,type:h.d.DISLIKE}).then(function(e){e.dislikes>K.questionAnswerReactionsDisLikes?(z(!0),n.questionAnswerUserReaction=h.d.DISLIKE):(z(!1),n.questionAnswerUserReaction="")}).finally(function(){T(!1)}),(0,m.y6)({type:"Dislike",productId:k})},isDislike:M,isLoadingLike:Z,isLoadingDislike:B,likeCount:null==K?void 0:K.questionAnswerReactionsLikes,dislikeCount:null==K?void 0:K.questionAnswerReactionsDisLikes,thumbsUpCroId:a.h.PDP_QUESTION_LIKE,thumbsDownCroId:a.h.PDP_QUESTION_DISLIKE})]})]})}}}]);